<?php#region License Statement	// Copyright (c) SeniorPartners. All rights reserved.	//	// 클래스명	: EZ_Member	// 경로		: [framework]/_include/class/data/	// 코드		: ANSI	// 설명		: 고객정보 모듈 클래스	// 작성자	: 김성호 (sh.kim@yourstage.com)	// 소속명	: Development Team	// 수정일	: 20090318#endregionif( !class_exists("EZ_Member") ){	require_once "class.BaseModule.php";	class EZ_Member extends BaseModule	{		//클래스 생성자		function EZ_Member()		{			parent::BaseModule();			$this->InitField( "ez_member" );	//고객정보			$this->InitField( "ez_secession" );	//고객탈퇴정보			$this->InitListInfo( "ez_member" );	//고객정보 List 관리용 변수 초기화		}		#region Base Statement			/**			* 데이터 초기화			*			* @param string		$as_TableName			:	테이블명			*/			function InitField( $as_TableName )			{				switch( $as_TableName )				{					case "ez_member":						$this->Fields[$as_TableName]	= Array(															'id'			=> Array('ISFIELD'=>true, 'USED'=>false, 'TYPE'=>"VALUE", 'DATA'=>""),															'passwd'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'name'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'resno'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'email'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'tphone'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'hphone'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'post'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'address'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'address2'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'reemail'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'resms'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'birthday'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'bgubun'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'marriage'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'memorial'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'scholarship'	=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'job'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'income'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'car'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'consph'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'conprd'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'level'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'recom'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'visit'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>0),															'visit_time'	=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'comment'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'wdate'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),															'windfamily'	=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"N"),	//윈드패밀리 승인상태															'windcate'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//윈드패밀리 참여구분															'windinstrument'=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"")	//윈드패밀리 악기구분															);						break;					case "ez_secession":						$this->Fields[$as_TableName]	= Array(															'idx'			=> Array('ISFIELD'=>true, 'USED'=>false, 'TYPE'=>"VALUE", 'DATA'=>0),															'id'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//아이디															'name'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//성명															'reason'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//탈퇴사유															'wdate'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//신청일시															'ip'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"")	//ip															);						break;					default:						parent::InitField( $as_TableName );						break;				}			}			/**			* 레코드 삽입			*			* @param string		$as_TableName			:	테이블명			* @return boolean			*/			function Insert( $as_TableName )			{				switch( $as_TableName )				{					case "ez_member":	//특정필드 데이터 설정						$this->SetData( $as_TableName, "wdate", "now()", "METHOD" );						break;					case "ez_secession":	//특정필드 데이터 설정						$this->SetUsable( $as_TableName, 'idx', false );						$this->SetData( $as_TableName, "wdate", "now()", "METHOD" );						break;					default:						break;				}				return parent::Insert( $as_TableName );			}			/**			* 레코드 반영			*			* @param string		$as_TableName			:	테이블명			* @param string		$as_Condition			:	쿼리 조건부			* @return boolean			*/			function Update( $as_TableName, $as_Condition )			{				switch( $as_TableName )				{					case "ez_member":	//키값 및 기타 데이터 변경방지						$this->SetUsable( $as_TableName, 'id', false );						$this->SetUsable( $as_TableName, 'wdate', false );						break;					case "ez_secession":	//키값 및 기타 데이터 변경방지						$this->SetUsable( $as_TableName, 'idx', false );						$this->SetUsable( $as_TableName, 'id', false );						$this->SetUsable( $as_TableName, 'wdate', false );						$this->SetUsable( $as_TableName, 'ip', false );						break;					default:						break;				}				return parent::Update( $as_TableName, $as_Condition );			}			/**			* 레코드 삭제			*			* @param string		$as_TableName			:	테이블명			* @param string		$as_Condition			:	쿼리 조건부			* @return boolean			*/			function Del( $as_TableName, $as_Condition )			{				return parent::Del( $as_TableName, $as_Condition );			}		#endregion		#region Regist Login DateTime			/**			* 로그인 횟수증가/시간 기록			*			* @return boolean			*/			function RegistLoginInfo()			{				$this->SetAllFieldsDisable( "ez_member" );				$this->SetData( "ez_member", "visit", "visit+1", "METHOD" );				$this->SetData( "ez_member", "visit_time", "now()", "METHOD" );				$ib_rtn = $this->Update( "ez_member", " WHERE (id='" . $this->GetData( "ez_member", "id" ) . "') " );				$this->SetAllFieldsDisable( "ez_member", true );				return $ib_rtn;			}		#endregion	}}?>