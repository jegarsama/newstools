<?php#region License Statement	// Copyright (c) SeniorPartners. All rights reserved.	//	// 클래스명	: EZ_Support	// 경로		: [framework]/_include/class/data/	// 코드		: ANSI	// 설명		: 정기후원신청자 모듈 클래스	// 작성자	: 김성호 (sh.kim@yourstage.com)	// 소속명	: Development Team	// 수정일	: 20090325#endregionif( !class_exists("EZ_Support") ){	require_once "class.BaseModule.php";	class EZ_Support extends BaseModule	{		//클래스 생성자		function EZ_Support()		{			parent::BaseModule();			$this->InitField( "ez_support" );			//정기후원신청자정보			$this->InitField( "ez_support_secession" );	//후원중단신청자정보			$this->InitListInfo( "ez_support" );	//정기후원신청자정보 List 관리용 변수 초기화		}		#region Base Statement			/**			* 데이터 초기화			*			* @param string		$as_TableName			:	테이블명			*/			function InitField( $as_TableName )			{				switch( $as_TableName )				{					case "ez_support":						$this->Fields[$as_TableName]	= Array(															'idx'			=> Array('ISFIELD'=>true, 'USED'=>false, 'TYPE'=>"VALUE", 'DATA'=>0),	//key															'name'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//이름															'gday_ok'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//나의 굿데이															'sex'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"M"),	//성별															'cata'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//개인/단체 구분															'series'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//후원종류															'comno'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//사업자등록번호															'birthday'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//생년월일															'resno'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//주민등록번호															'post1'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"-"),	//우편번호(집)															'address11'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//주소(집)															'address12'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//상세주소(집)															'post2'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"-"),	//우편번호(직장)															'address21'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//주소(직장)															'address22'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//상세주소(직장)															'tphone'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//전화(집)															'hphone'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//휴대폰															'resms'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"Y"),	//SMS 수신동의															'tphone2'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//전화(직장)															'email'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//이메일															'religion'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//종교															'job'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//직업															'motivation'	=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//가입동기															'solar'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"S"),	//생년월일 양/음력															'wdate'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//가입일시															'bank'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//은행명															'account'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//계좌번호															'payername'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//입금자명															'payerresno'	=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"-"),	//입금자 주민등록 번호															'cday'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//이체일															'cate'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//납입방법															'smoney'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//후원금															'comment'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"")	//하고싶은 말															);						break;					case "ez_support_secession":						$this->Fields[$as_TableName]	= Array(															'idx'			=> Array('ISFIELD'=>true, 'USED'=>false, 'TYPE'=>"VALUE", 'DATA'=>0),															'id'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//아이디															'name'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//성명															'resno'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"-"),	//주민등록번호															'comno'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"--"),	//사업자등록번호															'tphone'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//전화															'hphone'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//휴대폰															'reason'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//탈퇴사유															'comment'		=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//하고싶은 말															'wdate'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>""),	//신청일시															'ip'			=> Array('ISFIELD'=>true, 'USED'=>true, 'TYPE'=>"VALUE", 'DATA'=>"")	//ip															);						break;					default:						parent::InitField( $as_TableName );						break;				}			}			/**			* 레코드 삽입			*			* @param string		$as_TableName			:	테이블명			* @return boolean			*/			function Insert( $as_TableName )			{				switch( $as_TableName )				{					case "ez_support":	//특정필드 데이터 설정						$this->SetUsable( $as_TableName, 'idx', false );						$this->SetData( $as_TableName, "wdate", "now()", "METHOD" );						break;					case "ez_support_secession":	//특정필드 데이터 설정						$this->SetUsable( $as_TableName, 'idx', false );						$this->SetData( $as_TableName, "wdate", "now()", "METHOD" );						break;					default:						break;				}				return parent::Insert( $as_TableName );			}			/**			* 레코드 반영			*			* @param string		$as_TableName			:	테이블명			* @param string		$as_Condition			:	쿼리 조건부			* @return boolean			*/			function Update( $as_TableName, $as_Condition )			{				switch( $as_TableName )				{					case "ez_support":	//키값 및 기타 데이터 변경방지						$this->SetUsable( $as_TableName, 'idx', false );						$this->SetUsable( $as_TableName, 'wdate', false );						break;					case "ez_support_secession":	//키값 및 기타 데이터 변경방지						$this->SetUsable( $as_TableName, 'idx', false );						$this->SetUsable( $as_TableName, 'id', false );						$this->SetUsable( $as_TableName, 'wdate', false );						$this->SetUsable( $as_TableName, 'ip', false );						break;					default:						break;				}				return parent::Update( $as_TableName, $as_Condition );			}			/**			* 레코드 삭제			*			* @param string		$as_TableName			:	테이블명			* @param string		$as_Condition			:	쿼리 조건부			* @return boolean			*/			function Del( $as_TableName, $as_Condition )			{				return parent::Del( $as_TableName, $as_Condition );			}		#endregion		#region Check IsExist SupportInfo Statement			/**			* 개인 정기후원 정보 존재여부 체크			*			* @param string		$as_resno			:	주민등록번호			* @return boolean			*/			function IsExistSupportInfoByResno( $as_resno )			{				return $this->Load( "ez_support", "WHERE (resno<>'-') AND (resno='" . $as_resno . "')" );			}			/**			* 사업자 정기후원 정보 존재여부 체크			*			* @param string		$as_comno			:	사업자등록번호			* @return boolean			*/			function IsExistSupportInfoByComno( $as_comno )			{				return $this->Load( "ez_support", "WHERE (comno<>'--') AND (comno='" . $as_comno . "')" );			}		#endregion	}}?>